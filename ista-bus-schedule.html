<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0f172a">
  <title>ISTA Bus Schedule</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸšŒ</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
      min-height: 100vh;
      min-height: 100dvh;
    }
    
    :root {
      --ista-blue: #006699;
      --ista-light: #0088cc;
      --ista-accent: #00aadd;
      --ista-dark: #004466;
      --shuttle-green: #10b981;
    }
    
    .toggle-thumb {
      transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    
    .departure-row {
      animation: slideIn 0.3s ease forwards;
      opacity: 0;
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-10px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    .departure-row:nth-child(1) { animation-delay: 0.02s; }
    .departure-row:nth-child(2) { animation-delay: 0.04s; }
    .departure-row:nth-child(3) { animation-delay: 0.06s; }
    .departure-row:nth-child(4) { animation-delay: 0.08s; }
    .departure-row:nth-child(5) { animation-delay: 0.1s; }
    .departure-row:nth-child(6) { animation-delay: 0.12s; }
    .departure-row:nth-child(7) { animation-delay: 0.14s; }
    .departure-row:nth-child(8) { animation-delay: 0.16s; }
    
    .settings-panel {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }
    
    .settings-panel.open {
      max-height: 200px;
    }

    .glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .shuttle-badge {
      background: linear-gradient(135deg, var(--shuttle-green), #059669);
    }
    
    .regular-badge {
      background: linear-gradient(135deg, var(--ista-light), var(--ista-dark));
    }
    
    .container {
      min-height: 100vh;
      min-height: 100dvh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }
    
    .card {
      width: 100%;
      max-width: 420px;
    }
    
    .header {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .header-content {
      display: inline-flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo {
      width: 48px;
      height: 48px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      background: linear-gradient(135deg, #0088cc, #004466);
    }
    
    .title {
      text-align: left;
    }
    
    .title h1 {
      font-size: 24px;
      font-weight: 700;
      color: white;
      letter-spacing: -0.5px;
    }
    
    .title p {
      font-size: 14px;
      color: #94a3b8;
    }
    
    .main-card {
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
    
    .toggle-container {
      padding: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .toggle-track {
      position: relative;
      background: rgba(30, 41, 59, 0.5);
      border-radius: 16px;
      padding: 4px;
      cursor: pointer;
    }
    
    .toggle-thumb {
      position: absolute;
      top: 4px;
      bottom: 4px;
      width: calc(50% - 4px);
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background: linear-gradient(135deg, #0088cc, #004466);
    }
    
    .toggle-options {
      position: relative;
      display: flex;
    }
    
    .toggle-option {
      flex: 1;
      padding: 12px 16px;
      text-align: center;
      border-radius: 12px;
      z-index: 1;
      transition: all 0.3s ease;
    }
    
    .toggle-option.active {
      color: white;
      font-weight: 600;
    }
    
    .toggle-option.inactive {
      color: #64748b;
    }
    
    .toggle-label {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      opacity: 0.7;
      margin-bottom: 2px;
    }
    
    .toggle-text {
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }
    
    .toggle-text span {
      opacity: 0.5;
    }
    
    .time-bar {
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .time-info {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #cbd5e1;
      font-size: 14px;
    }
    
    .time-info svg {
      width: 16px;
      height: 16px;
    }
    
    .date-text {
      color: #64748b;
    }
    
    .weekend-badge {
      padding: 2px 8px;
      border-radius: 9999px;
      font-size: 12px;
      background: rgba(245, 158, 11, 0.2);
      color: #fbbf24;
    }
    
    .settings-btn {
      padding: 8px;
      border-radius: 12px;
      border: none;
      background: transparent;
      color: #64748b;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .settings-btn:hover, .settings-btn.active {
      background: rgba(255, 255, 255, 0.1);
      color: white;
    }
    
    .settings-content {
      padding: 16px;
    }
    
    .checkbox-label {
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      color: #cbd5e1;
      font-size: 14px;
    }
    
    .checkbox-label input {
      width: 16px;
      height: 16px;
      accent-color: #06b6d4;
    }
    
    .datetime-inputs {
      display: flex;
      gap: 12px;
      margin-top: 12px;
    }
    
    .datetime-inputs input {
      padding: 8px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: #1e293b;
      color: white;
      font-size: 14px;
      font-family: inherit;
    }
    
    .datetime-inputs input:focus {
      outline: none;
      border-color: #06b6d4;
    }
    
    .datetime-inputs input[type="date"] {
      flex: 1;
    }
    
    .datetime-inputs input[type="time"] {
      width: 110px;
    }
    
    .settings-note {
      font-size: 12px;
      color: #64748b;
      margin-top: 12px;
    }
    
    .legend {
      padding: 8px 16px;
      display: flex;
      gap: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .legend-badge {
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 700;
      color: white;
    }
    
    .legend-text {
      font-size: 12px;
      color: #64748b;
    }
    
    .departures-list {
      /* No additional styling needed */
    }
    
    .departure-row {
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      transition: background 0.2s ease;
    }
    
    .departure-row:last-child {
      border-bottom: none;
    }
    
    .departure-row:hover {
      background: rgba(255, 255, 255, 0.05);
    }
    
    .departure-row.first {
      background: rgba(255, 255, 255, 0.05);
    }
    
    .departure-time {
      width: 56px;
      text-align: center;
      font-size: 20px;
      font-weight: 700;
      color: #cbd5e1;
    }
    
    .departure-row.first .departure-time {
      color: white;
    }
    
    .departure-info {
      flex: 1;
    }
    
    .departure-badges {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .bus-badge {
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 700;
      color: white;
    }
    
    .shuttle-label {
      font-size: 12px;
      font-weight: 500;
      color: #34d399;
    }
    
    .next-badge {
      padding: 2px 8px;
      border-radius: 9999px;
      font-size: 12px;
      font-weight: 500;
      background: rgba(6, 182, 212, 0.2);
      color: #22d3ee;
    }
    
    .departure-duration {
      font-size: 12px;
      color: #64748b;
      margin-top: 4px;
    }
    
    .departure-countdown {
      text-align: right;
      font-weight: 600;
      color: #64748b;
      font-size: 14px;
    }
    
    .departure-row.first .departure-countdown {
      color: #22d3ee;
      font-size: 18px;
    }
    
    .empty-state {
      padding: 32px;
      text-align: center;
      color: #64748b;
    }
    
    .footer {
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 12px;
      color: #64748b;
      background: rgba(15, 23, 42, 0.5);
    }
    
    .offline-indicator {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    
    .offline-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #f59e0b;
    }
    
    .info-footer {
      margin-top: 16px;
      text-align: center;
      font-size: 12px;
      color: #64748b;
      line-height: 1.6;
    }
    
    .info-footer p {
      margin-bottom: 4px;
    }
    
    .info-footer .muted {
      color: #475569;
      margin-top: 8px;
    }

    /* Color scheme for dark inputs on iOS */
    input[type="date"]::-webkit-calendar-picker-indicator,
    input[type="time"]::-webkit-calendar-picker-indicator {
      filter: invert(1);
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // Bus 142 - ISTA Shuttle (Weekdays only, faster ~24min)
    const BUS_142_TO_CAMPUS = [
      '06:57', '07:27', '07:57', '08:17', '08:37', '08:57', '09:17', '09:37', '09:57',
      '10:57', '11:57', '12:57', '13:57', '14:57', '15:57', '16:57', '17:17', '17:37',
      '17:57', '18:27', '18:57', '19:57'
    ];

    const BUS_142_FROM_CAMPUS = [
      '07:26', '07:56', '08:26', '08:49', '09:09', '09:29', '10:29', '11:29', '12:29',
      '13:29', '14:29', '15:29', '16:29', '16:49', '17:09', '17:29', '17:49', '18:09',
      '18:29', '18:59', '19:29', '20:29'
    ];

    // Bus 400 schedules
    const BUS_400_WEEKDAY_TO_CAMPUS = [
      '05:28', '05:55', '06:08', '06:18', '06:28', '06:38', '06:48', '06:58', '07:08',
      '07:18', '07:28', '07:38', '07:48', '07:58', '08:08', '08:18', '08:28', '08:38',
      '08:48', '09:00', '09:10', '09:20', '09:30', '09:40', '09:50', '10:00', '10:10',
      '10:20', '10:30', '10:40', '10:50', '11:00', '11:10', '11:20', '11:30', '11:40',
      '11:50', '12:00', '12:10', '12:20', '12:30', '12:40', '12:50', '13:00', '13:10',
      '13:20', '13:30', '13:40', '13:50', '14:00', '14:10', '14:20', '14:30', '14:40',
      '14:50', '14:58', '15:08', '15:18', '15:28', '15:38', '15:48', '15:58', '16:08',
      '16:18', '16:28', '16:38', '16:48', '16:58', '17:08', '17:18', '17:28', '17:38',
      '17:48', '17:58', '18:08', '18:18', '18:28', '18:38', '18:48', '18:58', '19:08',
      '19:18', '19:28', '19:38', '19:48', '20:00', '20:15', '20:30', '20:45', '21:00',
      '21:15', '21:30', '21:45', '22:00', '22:30', '23:00', '23:30', '00:00', '00:47'
    ];

    const BUS_400_WEEKEND_TO_CAMPUS = [
      '06:00', '06:15', '06:30', '06:45', '07:00', '07:10', '07:20', '07:30', '07:40',
      '07:50', '08:00', '08:10', '08:20', '08:30', '08:40', '08:50', '09:00', '09:10',
      '09:20', '09:30', '09:40', '09:50', '10:00', '10:10', '10:20', '10:30', '10:40',
      '10:50', '11:00', '11:10', '11:20', '11:30', '11:40', '11:50', '12:00', '12:10',
      '12:20', '12:30', '12:40', '12:50', '13:00', '13:10', '13:20', '13:30', '13:40',
      '13:50', '14:00', '14:10', '14:20', '14:30', '14:40', '14:50', '15:00', '15:10',
      '15:20', '15:30', '15:40', '15:50', '16:00', '16:10', '16:20', '16:30', '16:40',
      '16:50', '17:00', '17:10', '17:20', '17:30', '17:40', '17:50', '18:00', '18:10',
      '18:20', '18:30', '18:40', '18:50', '19:00', '19:15', '19:30', '19:45', '20:00',
      '20:30', '21:00', '21:30', '22:00', '22:30', '23:00', '23:30', '00:00', '00:47'
    ];

    const BUS_400_SUNDAY_TO_CAMPUS = [
      '06:00', '06:15', '06:30', '06:45', '07:00', '07:15', '07:30', '07:45', '08:00',
      '08:15', '08:30', '08:45', '09:00', '09:15', '09:30', '09:45', '10:00', '10:15',
      '10:30', '10:45', '11:00', '11:15', '11:30', '11:45', '12:00', '12:15', '12:30',
      '12:45', '13:00', '13:15', '13:30', '13:45', '14:00', '14:15', '14:30', '14:45',
      '15:00', '15:15', '15:30', '15:45', '16:00', '16:15', '16:30', '16:45', '17:00',
      '17:15', '17:30', '17:45', '18:00', '18:15', '18:30', '18:45', '19:00', '19:15',
      '19:30', '19:45', '20:00', '20:30', '21:00', '21:30', '22:00', '22:30', '23:00',
      '23:30', '00:00', '00:47'
    ];

    const BUS_400_WEEKDAY_FROM_CAMPUS = [
      '05:42', '06:12', '06:27', '06:42', '06:57', '07:12', '07:27', '07:42', '07:57',
      '08:12', '08:27', '08:42', '08:57', '09:12', '09:27', '09:42', '09:57', '10:12',
      '10:27', '10:42', '10:57', '11:12', '11:27', '11:42', '11:57', '12:12', '12:27',
      '12:42', '12:57', '13:12', '13:27', '13:42', '13:57', '14:12', '14:27', '14:42',
      '14:57', '15:12', '15:27', '15:42', '15:57', '16:12', '16:27', '16:42', '16:57',
      '17:12', '17:27', '17:42', '17:57', '18:12', '18:27', '18:42', '18:57', '19:12',
      '19:27', '19:42', '19:57', '20:12', '20:27', '20:42', '21:12', '21:42', '22:12',
      '22:42', '23:12', '23:42', '00:12', '00:57'
    ];

    const BUS_400_WEEKEND_FROM_CAMPUS = [
      '06:17', '06:32', '06:47', '07:02', '07:17', '07:32', '07:47', '08:02', '08:17',
      '08:32', '08:47', '09:02', '09:17', '09:32', '09:47', '10:02', '10:17', '10:32',
      '10:47', '11:02', '11:17', '11:32', '11:47', '12:02', '12:17', '12:32', '12:47',
      '13:02', '13:17', '13:32', '13:47', '14:02', '14:17', '14:32', '14:47', '15:02',
      '15:17', '15:32', '15:47', '16:02', '16:17', '16:32', '16:47', '17:02', '17:17',
      '17:32', '17:47', '18:02', '18:17', '18:32', '18:47', '19:02', '19:17', '19:32',
      '19:47', '20:02', '20:32', '21:02', '21:32', '22:02', '22:32', '23:02', '23:32',
      '00:02', '00:57'
    ];

    function getScheduleForDay(direction, dayOfWeek) {
      const isWeekday = dayOfWeek >= 1 && dayOfWeek <= 5;
      const isSaturday = dayOfWeek === 6;
      const isSunday = dayOfWeek === 0;

      if (direction === 'toCampus') {
        const bus400 = isSunday ? BUS_400_SUNDAY_TO_CAMPUS :
                       isSaturday ? BUS_400_WEEKEND_TO_CAMPUS :
                       BUS_400_WEEKDAY_TO_CAMPUS;
        const bus142 = isWeekday ? BUS_142_TO_CAMPUS : [];
        return { bus400, bus142 };
      } else {
        const bus400 = (isSunday || isSaturday) ? BUS_400_WEEKEND_FROM_CAMPUS : BUS_400_WEEKDAY_FROM_CAMPUS;
        const bus142 = isWeekday ? BUS_142_FROM_CAMPUS : [];
        return { bus400, bus142 };
      }
    }

    function timeToMinutes(timeStr) {
      const [hours, mins] = timeStr.split(':').map(Number);
      return hours * 60 + mins;
    }

    function getNextDepartures(schedules, referenceTime, count = 8) {
      const refMinutes = referenceTime.getHours() * 60 + referenceTime.getMinutes();
      const allDepartures = [];
      
      schedules.bus400.forEach(time => {
        const depMinutes = timeToMinutes(time);
        let minutesUntil = depMinutes - refMinutes;
        if (minutesUntil < -5) minutesUntil += 24 * 60;
        allDepartures.push({ time, bus: '400', minutesUntil, duration: '~30 min' });
      });
      
      schedules.bus142.forEach(time => {
        const depMinutes = timeToMinutes(time);
        let minutesUntil = depMinutes - refMinutes;
        if (minutesUntil < -5) minutesUntil += 24 * 60;
        allDepartures.push({ time, bus: '142', minutesUntil, duration: '~24 min' });
      });
      
      return allDepartures
        .filter(d => d.minutesUntil >= -2)
        .sort((a, b) => a.minutesUntil - b.minutesUntil)
        .slice(0, count);
    }

    function formatMinutes(mins) {
      if (mins <= 0) return 'Now';
      if (mins === 1) return '1 min';
      if (mins < 60) return `${mins} min`;
      const hours = Math.floor(mins / 60);
      const remaining = mins % 60;
      if (remaining === 0) return `${hours}h`;
      return `${hours}h ${remaining}m`;
    }

    function formatDate(date) {
      return date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
    }

    function BusIcon() {
      return (
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
          <path d="M8 6v6M16 6v6M2 12h20M6 18h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2zM6 18v2M18 18v2"/>
          <circle cx="7" cy="15" r="1" fill="currentColor"/>
          <circle cx="17" cy="15" r="1" fill="currentColor"/>
        </svg>
      );
    }

    function SettingsIcon() {
      return (
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
          <circle cx="12" cy="12" r="3"/>
          <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/>
        </svg>
      );
    }

    function ClockIcon() {
      return (
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12,6 12,12 16,14"/>
        </svg>
      );
    }

    function App() {
      const [direction, setDirection] = useState('toCampus');
      const [showSettings, setShowSettings] = useState(false);
      const [useCustomTime, setUseCustomTime] = useState(false);
      const [customDate, setCustomDate] = useState('');
      const [customTime, setCustomTime] = useState('');
      const [currentTime, setCurrentTime] = useState(new Date());

      useEffect(() => {
        const now = new Date();
        setCustomDate(now.toISOString().split('T')[0]);
        setCustomTime(now.toTimeString().slice(0, 5));
      }, []);

      useEffect(() => {
        if (!useCustomTime) {
          const timer = setInterval(() => setCurrentTime(new Date()), 1000);
          return () => clearInterval(timer);
        }
      }, [useCustomTime]);

      const referenceTime = useMemo(() => {
        if (useCustomTime && customDate && customTime) {
          return new Date(`${customDate}T${customTime}`);
        }
        return currentTime;
      }, [useCustomTime, customDate, customTime, currentTime]);

      const dayOfWeek = referenceTime.getDay();
      const isWeekday = dayOfWeek >= 1 && dayOfWeek <= 5;
      
      const schedules = useMemo(() => 
        getScheduleForDay(direction, dayOfWeek),
        [direction, dayOfWeek]
      );
      
      const departures = useMemo(() => 
        getNextDepartures(schedules, referenceTime, 8),
        [schedules, referenceTime]
      );

      const toCampus = direction === 'toCampus';

      return (
        <div className="container">
          <div className="card">
            {/* Header */}
            <div className="header">
              <div className="header-content">
                <div className="logo">
                  <BusIcon />
                </div>
                <div className="title">
                  <h1>IST Austria</h1>
                  <p>Bus Schedule</p>
                </div>
              </div>
            </div>
            
            {/* Main Card */}
            <div className="main-card glass">
              {/* Direction Toggle */}
              <div className="toggle-container">
                <div className="toggle-track" onClick={() => setDirection(d => d === 'toCampus' ? 'fromCampus' : 'toCampus')}>
                  <div className="toggle-thumb" style={{ transform: toCampus ? 'translateX(0)' : 'translateX(100%)' }} />
                  <div className="toggle-options">
                    <div className={`toggle-option ${toCampus ? 'active' : 'inactive'}`}>
                      <div className="toggle-label">To Campus</div>
                      <div className="toggle-text">Heiligenstadt <span>â†’</span> ISTA</div>
                    </div>
                    <div className={`toggle-option ${!toCampus ? 'active' : 'inactive'}`}>
                      <div className="toggle-label">From Campus</div>
                      <div className="toggle-text">ISTA <span>â†’</span> Heiligenstadt</div>
                    </div>
                  </div>
                </div>
              </div>
              
              {/* Time Display & Settings */}
              <div className="time-bar">
                <div className="time-info">
                  <ClockIcon />
                  <span>{referenceTime.toLocaleTimeString('de-AT', { hour: '2-digit', minute: '2-digit' })}</span>
                  <span className="date-text">{formatDate(referenceTime)}</span>
                  {!isWeekday && <span className="weekend-badge">Weekend</span>}
                </div>
                <button className={`settings-btn ${showSettings ? 'active' : ''}`} onClick={() => setShowSettings(!showSettings)}>
                  <SettingsIcon />
                </button>
              </div>
              
              {/* Settings Panel */}
              <div className={`settings-panel ${showSettings ? 'open' : ''}`} style={{ borderBottom: showSettings ? '1px solid rgba(255,255,255,0.05)' : 'none' }}>
                <div className="settings-content">
                  <label className="checkbox-label">
                    <input 
                      type="checkbox" 
                      checked={useCustomTime}
                      onChange={(e) => setUseCustomTime(e.target.checked)}
                    />
                    <span>Use custom date & time</span>
                  </label>
                  
                  {useCustomTime && (
                    <div className="datetime-inputs">
                      <input 
                        type="date"
                        value={customDate}
                        onChange={(e) => setCustomDate(e.target.value)}
                      />
                      <input 
                        type="time"
                        value={customTime}
                        onChange={(e) => setCustomTime(e.target.value)}
                      />
                    </div>
                  )}
                  
                  {useCustomTime && (
                    <p className="settings-note">
                      Showing schedule for {formatDate(referenceTime)}
                      {!isWeekday && ' (Bus 142 not available on weekends)'}
                    </p>
                  )}
                </div>
              </div>
              
              {/* Legend */}
              <div className="legend">
                <div className="legend-item">
                  <span className="legend-badge shuttle-badge">142</span>
                  <span className="legend-text">Shuttle (faster)</span>
                </div>
                <div className="legend-item">
                  <span className="legend-badge regular-badge">400</span>
                  <span className="legend-text">Regular</span>
                </div>
              </div>
              
              {/* Departures List */}
              <div className="departures-list">
                {departures.length === 0 ? (
                  <div className="empty-state">No upcoming departures found</div>
                ) : (
                  departures.map((dep, index) => (
                    <div key={`${dep.bus}-${dep.time}-${index}`} className={`departure-row ${index === 0 ? 'first' : ''}`}>
                      <div className="departure-time">{dep.time}</div>
                      <div className="departure-info">
                        <div className="departure-badges">
                          <span className={`bus-badge ${dep.bus === '142' ? 'shuttle-badge' : 'regular-badge'}`}>{dep.bus}</span>
                          {dep.bus === '142' && <span className="shuttle-label">ISTA Shuttle</span>}
                          {index === 0 && <span className="next-badge">Next</span>}
                        </div>
                        <div className="departure-duration">{dep.duration} journey</div>
                      </div>
                      <div className="departure-countdown">{formatMinutes(dep.minutesUntil)}</div>
                    </div>
                  ))
                )}
              </div>
              
              {/* Footer */}
              <div className="footer">
                <span>{isWeekday ? 'Weekday Schedule' : 'Weekend Schedule'}</span>
                <span className="offline-indicator">
                  <span className="offline-dot"></span>
                  Offline Schedule
                </span>
              </div>
            </div>
            
            {/* Info Footer */}
            <div className="info-footer">
              <p>Bus 142 = ISTA Shuttle (weekdays only, direct & faster)</p>
              <p>Bus 400 = Regular line (all days, more stops)</p>
              <p className="muted">Data from VOR/Ã–BB schedules â€¢ Feb 2024</p>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
